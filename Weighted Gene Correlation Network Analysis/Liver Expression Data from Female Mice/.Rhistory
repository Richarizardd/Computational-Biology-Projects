plot(c(summaryTongueFit$time, 250), Tongue.hat, xlab="time", ylab="cumulative hazard",
main="comparing cumulative hazards", ylim=range(c(Tongue.hat, Tongue.tilde)), type="s")
points(c(summaryTongueFit$time, 250), Tongue.tilde, lty=2, type="s")
legend("topleft", legend=c("Tongue.hat","Tongue.tilde"), lty=1:2)
### 4. Mean and Median estimates with bounds ###
### 5. Cox Proportional Hazard Model, Constant Covariates ###
SurvBurnObj <- Surv(T1, D1)
CoxphFitBurn <- coxph(SurvBurnObj ~ Z1 + as.factor(Z11), method = "breslow")
SurvTongueObj1
SurvTongueObj1
RowCheck <- function(y, members, pheWAS, pharm) {
if (!(FALSE %in% (y3$MemberId == as.numeric(rownames(pheWAS))))) {
if (!(FALSE %in% (y3$MemberId == as.numeric(rownames(pharm))))) {
if (!(FALSE %in% (y$MemberId == members$MemberId))) {
TRUE
} else {
FALSE
}
} else {
FALSE
}
} else {
FALSE
}
}
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER")
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER")
DosageForm
strsplit("SUPP ER")
strsplit("SUPP ER", " ")
head(strsplit("SUPP ER", " "))
head(strsplit("SUPP ER", " "), 1)
strsplit("SUPP ER", " ")[1]
strsplit("SUPP ER", " ")[[1]]
test <- strsplit("SUPP ER", " ")
test
class(test)
test[[1]]
test[1]
test[[1]]
test[[1]][1]
strsplit("SUPP", " ")[[1]]
strsplit("SUPP", " ")[[1]][1]
sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
lapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew
class(DosageFormNew)
names(DosageFormNew)
unclass(DosageFormNew)
unname(DosageFormNew)
unique(unname(DosageFormNew))
DosageFormNew <- unique(unname(DosageFormNew))
1:1
1:2
drug <- "Tylenol CAP"
grep(drug, DosageFormNew)
grep(DosageFormNew, drug)
gregexpr(drug, DosageFormNew)
sapply(DosageFormNew, function(x) grep(x, drug))
DosageDrugForm
DosageFOrmNew
DosageFormNew
sapply(DosageFormNew, function(x) grep(x, "Tylenol B CAP"))
unname(sapply(DosageFormNew, function(x) grep(x, "Tylenol B CAP")))
sapply(DosageFormNew, function(x) grep(x, "Tylenol B CAP"))
sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")))
grep("CAP", strsplit("Tylenol B CAP", " "))
strsplit("Tylenol B CAP", " ")
strsplit("Tylenol B CAP", " ")[1]
strsplit("Tylenol B CAP", " ")[[1]]
grep("CAP", strsplit("Tylenol B CAP", " ")[[1]])
sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")[[1]]))
min(sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")[[1]])))
sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")[[1]]))
sapply <- sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")[[1]]))
sapply
sapplytest <- sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP", " ")[[1]]))
class(sapplytest)
as.vector(sapplytest)
unname(as.vector(sapplytest))
blah <- unname(as.vector(sapplytest))
class(blah)
as.vector(sapplytest)
unclass(sapplytest)
sapplytest
unlist(sapplytest)
sapplytest <- sapply(DosageFormNew, function(x) grep(x, strsplit("Tylenol B CAP WAFER", " ")[[1]]))
unlist(sapplytest)
MIN(UNLIST(SAPPLYTEST))
min(unlist(sapplytest))
NDCFun <- function(x) {
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER")
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew <- unique(unname(DosageFormNew))
sapply(x, function(y) min(unlist(sapply(DosageFormNew, function(z) grep(z, strsplit(y, " ")[[1]]))))
}
NDCFun <- function(x) {
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER")
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew <- unique(unname(DosageFormNew))
sapply(x, function(y) min(unlist(sapply(DosageFormNew, function(z) grep(z, strsplit(y, " ")[[1]])))))
}
NdcDescription <- c("FUROSEMIDE TAB 40MG", "RENAGEL TAB 800MG", "KLOR-CON M20 TAB 20MEQ ER", "ONDANSETRON TAB 4MG ODT", "SANTYL OIN 250/GM", "CHERATUSSIN SYP AC")
NdcDescription
NDCFun(NdcDescription)
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER",
"OIN", "SYP", "SHA", "DIS", "SUB", "CRE", "LOT", "TES", "POW", "SUS", "SPR", "DRO", "MIS", "PST", "NEB", "TRO", "PAK"
"PAK", "CHW", "EMU", "FEE")
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew <- unique(unname(DosageFormNew))
NDCFun <- function(x) {
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER",
"OIN", "SYP", "SHA", "DIS", "SUB", "CRE", "LOT", "TES", "POW", "SUS", "SPR", "DRO", "MIS", "PST", "NEB", "TRO", "PAK",
"PAK", "CHW", "EMU", "FEE")
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew <- unique(unname(DosageFormNew))
sapply(x, function(y) min(unlist(sapply(DosageFormNew, function(z) grep(z, strsplit(y, " ")[[1]])))))
}
NdcDescription <- c("NITROSTAT  SUB", "FUROSEMIDE TAB 40MG", "RENAGEL TAB 800MG", "KLOR-CON M20 TAB 20MEQ ER", "ONDANSETRON TAB 4MG ODT", "SANTYL OIN 250/GM", "CHERATUSSIN SYP AC")
sapply(membersDF$NdcDescription, NDCFun)
NdcDescription <- c("NITROSTAT  SUB", "FUROSEMIDE TAB 40MG", "RENAGEL TAB 800MG", "KLOR-CON M20 TAB 20MEQ ER", "ONDANSETRON TAB 4MG ODT", "SANTYL OIN 250/GM", "CHERATUSSIN SYP AC")
sapply(NdcDescription, NDCFun)
DosageFormNew
NdcDescription
sapply(NdcDescription, NDCFun)
min(unlist(sapply(DosageFormNew, function(z) grep(z, strsplit("NITROSTAT    SUB 50", " ")[[1]]))))
strsplit("NITROSTAT    SUB 50", " ")
strsplit("NITROSTAT    SUB 50", " ")
strsplit("NITROSTAT     SUB 50", " ")
length(strsplit("NITROSTAT     SUB 50", " "))
length(strsplit("NITROSTAT     SUB 50", " ")[1])
length(strsplit("NITROSTAT     SUB 50", " ")[[1]])
unlist(sapply(DosageFormNew, function(z) grep(z, strsplit("NITROSTAT    SUB 50", " ")[[1]])))
DosageForm <- c("AER", "AER FOAM", "AER MET", "AER PWD", "AER SPRAY", "BAR CHEW", "BEAD", "BEAD IMP ER",
"BLOCK", "CAP", "CAP COATED", "CAP COATED PELLETS", "CAP COATED ER", "CAP DR", "CAP DR PELLETS",
"CAP ER", "CAP FILM COATED ER", "CAP GELATIN COATED", "CAP LIQ FILLED", "CEMENT", "CIGARETTE",
"CLOTH", "CONC", "CONE", "CORE ER", "CREAM", "CREAM AUG", "CRYSTAL", "CRYSTAL", "CULTURE", "DIAPHRAGM",
"DISC", "DOUCHE", "DRESSING", "DDS", "ELIXIR", "EMULSION", "ENEMA", "EXTRACT", "FIBER ER", "FILM", "FILM ER",
"FILM SOLUBLE", "FOR SOL", "FOR SUSP", "FOR SUSP ER", "GAS", "GEL", "GEL DENT", "GEL MET", "GENERATOR", "GLOBULE",
"GRAFT", "GRAN", "GRAN DR", "GRAN EFFRV", "GRAN F/SOL", "GRAN F/SUSP", "GRAN F/SUSP ER", "GUM", "GUM CHEWING",
"GUM RESIN", "IMP", "INHALANT", "INJ LIPOS", "INJ", "INJ EMULSION", "INJ LIPID COMPLEX", "INJ PWD F/SOL", "INJ PWD F/SUSP",
"INJ PWD F/SUSP ER", "INJ PWD LYO F/LS", "INJ PWD LYO F/SOL", "INJ PWD LYO F/SUSP", "INJ PWD LYO F/SUSPER",
"INJ SOL", "INJ SOL CONC", "INJ SUSP", "INJ SUSP ER", "INJ SUSP LIPOS", "INJ SUSP SON", "INSERT", "INSERT ER",
"IUD", "IRRIGANT", "JELLY", "KIT", "LINER DENTAL", "LINIMENT", "LIPSTICK", "LIQ", "LIQ ER", "LOTION", "LOTION AUG",
"LOTION AUG", "LOTION SHAMPOO", "LOZENGE", "MOUTHWASH", "NOT APPLICABLE", "OIL", "OINTMENT", "OINTMENT AUG",
"PACKING", "PASTE", "PASTE DENT", "PASTILLE", "PATCH", "PASTCH ER", "PATCH ER ELCON", "PELLET", "PELLET IMP",
"PELLETS COATED ER", "PILL", "PLASTER", "POULTICE", "PWD DENT", "PWD F/SOL", "PWD F/SUSP", "PWD MET", "RING",
"RINSE", "SALVE", "SHAMPOO", "SHAMPOO SUSP", "SOAP", "SOL", "SOL CONC", "SOL F/SLUSH", "SOL GF DROPS", "SOL GF ER",
"SOL DROPS", "SPONGE", "SPRAY", "SPRAY MET", "SPRAY SUSP", "STICK", "STRIP", "SUPP", "SUPP ER", "SUSP", "SUSP ER",
"SUSP DROPS", "SUTURE", "SWAB", "SYRUP", "TAB", "TAB CHEW", "TAB COATED", "TAB COATED PART", "TAB DR", "TAB DR PARTICLES",
"TAB DISP", "TAB EFFRV", "TAB ER", "TAB FILM COATED", "TAB FILM COATED ER", "TAB FOR SOL", "TAB FOR SUSP", "TAB MULTIPLAYER", "TAB MULTIPLAYER ER",
"TAB ORALLY DIS", "TAB ORALLY DIS DR", "TAB SOLUBLE", "TAB SUGAR COATED", "TAMPON", "TAPE", "TINCTURE", "TROCHE", "UNASSIGNED", "WAFER",
"OIN", "SYP", "SHA", "DIS", "SUB", "CRE", "LOT", "TES", "POW", "SUS", "SPR", "DRO", "MIS", "PST", "NEB", "TRO", "PAK",
"PAK", "CHW", "EMU", "FEE")
DosageForm
DosageFormNew <- sapply(DosageForm, function(x) strsplit(x, " ")[[1]][1])
DosageFormNew
DosageFormNew <- unique(unname(DosageFormNew))
DosageFormNew
unlist(sapply(DosageFormNew, function(z) grep(z, strsplit("NITROSTAT    SUB 50", " ")[[1]])))
unlist(sapply(DosageFormNew, function(z) grep(z, strsplit("NITROSTAT    SUB 50", " ")[[1]], fixed = TRUE)))
unlist(sapply(DosageFormNew, function(z) match(z, strsplit("NITROSTAT    SUB 50", " ")[[1]])))
sapply(DosageFormNew, function(z) match(z, strsplit("NITROSTAT    SUB 50", " ")[[1]]))
temp <- sapply(DosageFormNew, function(z) match(z, strsplit("NITROSTAT    SUB 50", " ")[[1]]))
temp[!is.na(temp)]
NdcDescription <- c("NITROSTAT  SUB", "FUROSEMIDE TAB 40MG", "RENAGEL TAB 800MG", "KLOR-CON M20 TAB 20MEQ ER", "ONDANSETRON TAB 4MG ODT", "SANTYL OIN 250/GM", "CHERATUSSIN SYP AC")
NdcDescription
NewNdcDescription <- sapply(adjPharmMatrix$NdcDescription, strsplit(x, " ")[[1]][1])
NewNdcDescription <- sapply(adjPharmMatrix$NdcDescription, function(x) strsplit(x, " ")[[1]][1])
NewNdcDescription <- sapply(aNdcDescription, function(x) strsplit(x, " ")[[1]][1])
NewNdcDescription <- sapply(NdcDescription, function(x) strsplit(x, " ")[[1]][1])
NewNdcDescription
unname(NewNdcDescription)
install.packages("rclinicaltrials")
install.packages("googleVis")
"411", "411", "411",
"411", "411", "411",
### Test SQL Data ###
options(stringsAsFactors = FALSE)
MIHistory <- data.frame(MemberId = c(
"Bartholomew","Bartholomew", "Bartholomew",
"Bartholomew","Bartholomew", "Bartholomew",
"Bartholomew","Bartholomew", "Bartholomew",
"Sue", "Sue", "Sue",
"Sue", "Sue", "Sue",
"Sue", "Sue", "Sue",
"Archibald", "Archibald", "Archibald",
"Archibald", "Archibald", "Archibald",
"Archibald", "Archibald", "Archibald"),
DateServiceStarted = as.Date(c(
"2010-11-17", "2010-11-18", "2010-11-19",
"2010-11-17", "2010-11-18", "2010-11-19",
"2010-11-20", "2010-11-22", "2010-11-24",
"2010-11-27", "2010-12-17", "2011-12-19",
"2010-12-20", "2010-12-25", "2010-12-27",
"2010-12-28", "2010-12-29", "2011-1-5",
"2012-5-1", "2010-5-2", "2010-5-3",
"2012-5-7", "2010-5-8", "2010-5-9",
"2012-5-15", "2010-5-16", "2010-5-18")),
PheWASCode = c(
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411",
"411", "411", "411"))
MIHistory <- arrange(MIHistory, MemberId, DateServiceStarted)
MIHistory
"Bartholomew","Bartholomew", "Bartholomew",
"Sue", "Sue", "Sue",
"Sue", "Sue", "Sue",
"Sue", "Sue", "Sue",
"Archibald", "Archibald", "Archibald",
"Archibald", "Archibald", "Archibald",
"Archibald", "Archibald", "Archibald"),
DateServiceStarted = as.Date(c(
"2010-11-17", "2010-11-18", "2010-11-19",
"2010-11-17", "2010-11-18", "2010-11-19",
"2010-11-20", "2010-11-22", "2010-11-24",
"2010-11-27", "2010-12-17", "2011-12-19",
library(ggplot2)
AUC <- data.frame(Model=c("Random Forests","Earth","SVM","LVQ","Logistic Regression"),
Auc=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
AUC
AUC <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
Auc=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
AUC
theme_set(theme_gray(base_size = 18))
qplot(x=model, y=auc, data=test.auc, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
qplot(x=model, y=auc, data = AUC, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
qplot(x=Model, y=AUC, data = AUC, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
AUCDF <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
Auc=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
theme_set(theme_gray(base_size = 18))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
AUCDF <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
Auc=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
theme_set(theme_gray(base_size = 18))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
AUCDF <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
AUC=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
theme_set(theme_gray(base_size = 18))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
library(ggplot2)
library(plyr)
library(reshape2)
n <- 10
group <- rep(1:4, n)
mass.means <- c(10, 20, 15, 30)
mass.sigma <- 4
score.means <- c(5, 5, 7, 4)
score.sigma <- 3
mass <- as.vector(model.matrix(~0+factor(group)) %*% mass.means) +
rnorm(n*4, 0, mass.sigma)
score <- as.vector(model.matrix(~0+factor(group)) %*% score.means) +
rnorm(n*4, 0, score.sigma)
data <- data.frame(id = 1:(n*4), group, mass, score)
melted <- melt(data, id.vars=c("id", "group"))
means <- ddply(melted, c("group", "variable"), summarise,
mean=mean(value))
means
means.barplot <- qplot(x=group, y=mean, fill=variable,
data=means, geom="bar", stat="identity",
position="dodge")
means.barplot
PerformanceDF <- data.frame(Model = c('PheWAS', 'GRACE', 'Pharm.', "PheWAS + Pharm."),
AUC = c(0.8122, 0.84, 0.8541, 0.8817))
qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity")
qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "dark grey", stat="identity")
qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "dark grey", stat="identity") + theme(text = element_text(size=20)
)
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity") + theme(text = element_text(size=20))
AUCDF <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
AUC=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity") + theme(text = element_text(size=20))
AUCDF <- data.frame(Model=c("RF","Earth","SVM","LVQ","GLM"),
AUC=c(0.8122, 0.7952, 0.7672, 0.6802, 0.5486))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
+ geom_bar(fill = "light blue", stat="identity")
+ geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3, position =     "stack")
+ theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
+ geom_bar(fill = "light blue", stat="identity")
+ geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
+ theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
+ geom_bar(fill = "light blue", stat="identity")
+ theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
+ geom_bar(fill = "light blue", stat="identity")
+ theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge") + theme(text = element_text(size=20))
+ geom_bar(fill = "light blue", stat="identity")
+ geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge") + theme(text = element_text(size=20))
+ geom_bar(fill = "light blue", stat="identity")
+ geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")+ geom_bar(fill = "light blue", stat="identity") + theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
+ geom_bar(fill = "light blue", stat="identity")
+ theme(text = element_text(size=20))
qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge") + theme(text = element_text(size=20)) + geom_bar(fill = "light blue", stat="identity")
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_bar(fill = "light blue", stat="identity")
q1
q1 <- q1 + geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
q1
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
q1 <- q1 + geom_bar(fill = "light red", stat="identity")
q1
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
q1 <- q1 + geom_bar(fill = "light blue", stat="identity")
q1
q1 <- q1 + geom_text(aes(label = AUC), size = 3, hjust = 0.5, vjust = 3)
q1
q1 <- q1 + geom_text(aes(label = AUC), size = 15, hjust = 0.5, vjust = 3)
q1
q1 <- q1 + geom_text(aes(label = AUC), size = 10, hjust = 0.5, vjust = 3)
q
q1
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_bar(fill = "light blue", stat="identity")
q1 <- q1 + geom_text(aes(label = AUC), size = 8, hjust = 0.5, vjust = 3)
q1
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_bar(fill = "light blue", stat="identity")
q1 <- q1 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q1
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")
q2 <- q2 theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge") + opts(title="Order by variable")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- q2 + scale_x_discrete(limits= AUC)
q2
q2 <- q2 + scale_x_discrete(limits= PerformanceDF$AUC)
q2
PerformanceDF$Model <- factor(PerformanceDF$Model, levels = PerformanceDF$Model[order(PerformanceDF$Model)])
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge") + opts(title="Order by variable")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
PerformanceDF$Model <- factor(PerformanceDF$Model, levels = PerformanceDF$Model[order(PerformanceDF$Model)])
PerformanceDF
PerformanceDF$Model
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge") + opts(title="Order by variable")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
PerformanceDF$Model <- factor(PerformanceDF$Model, levels = PerformanceDF$Model[order(PerformanceDF$Model)])
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
PerformanceDF$Model <- factor(PerformanceDF$Model, levels = PerformanceDF$Model[order(PerformanceDF$AUC)])
q2 <- qplot(x=Model, y=AUC, data = PerformanceDF, geom="bar", stat="identity", position = "dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
AUCDF$Model <- factor(AUCDF$Model, levels = AUCDF$Model[order(AUCDF$AUC)])
q1 <- qplot(x=Model, y=AUC, data = AUCDF, geom="bar", stat="identity", position = "dodge")
q1 <- q1 + theme(text = element_text(size=20))
q1 <- q1 + geom_bar(fill = "light blue", stat="identity")
q1 <- q1 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q1
means
PerformanceDF <- data.frame(Metric = c('Accuracy', 'Accuracy', 'Accuracy',
'Sensitivity', 'Sensitivity', 'Sensitivity',
'Specificity', 'Specificity', 'Specificity'),
Model = c('PheWAS', 'Pharm', 'Both',
'PheWAS', 'Pharm', 'Both',
'PheWAS', 'Pharm', 'Both'),
Number = c(0.819, 0.845, 0.897,
0.909, 0.935, 0.961,
0.675, 0.712, 0.802))
PerformanceDF
q3 <- qplot(x = Metric, y = Number, fill = Model, data = PerformanceDF, geom="bar", stat="identity", position="dodge")
q3
q2 <- qplot(x = Metric, y = Number, fill = Model, data = PerformanceDF, geom="bar", stat="identity", position="dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = AUC), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- qplot(x = Metric, y = Number, fill = Model, data = PerformanceDF, geom="bar", stat="identity", position="dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_bar(fill = "light blue", stat="identity")
q2 <- q2 + geom_text(aes(label = Number), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- qplot(x = Metric, y = Number, fill = Model, data = PerformanceDF, geom="bar", stat="identity", position="dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2 <- q2 + geom_text(aes(label = Number), size = 5, hjust = 0.5, vjust = 3)
q2
q2 <- qplot(x = Metric, y = Number, fill = Model, data = PerformanceDF, geom="bar", stat="identity", position="dodge")
q2 <- q2 + theme(text = element_text(size=20))
q2
setwd("~/Documents/Documents and Learning/Programming/Richards-Data-Science-Projects/Weighted Correlation Network Analysis of RNA-seq Data/1 - Network analysis of liver expression data from female mice")
getwd()
